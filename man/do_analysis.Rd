% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/temperature_dlnm_funcs.R
\name{do_analysis}
\alias{do_analysis}
\title{Do full DLNM analysis}
\usage{
do_analysis(
  input_csv_path_,
  output_folder_path_ = NULL,
  save_fig_ = TRUE,
  save_csv_ = TRUE,
  meta_analysis = TRUE,
  by_region = TRUE,
  time_range_start_ = "NONE",
  time_range_end_ = "NONE",
  dependent_col_ = "death",
  independent_col1_ = "NONE",
  independent_col2_ = "NONE",
  independent_col3_ = "NONE",
  time_col_ = "date",
  region_col_ = "regnames",
  temp_col_ = "tmean",
  varfun_ = "bs",
  vardegree_ = 2,
  lag_ = 21,
  lagnk_ = 3,
  dfseas_ = 8
)
}
\arguments{
\item{input_csv_path_}{Path to a CSV contain
daily time series of death and temperature per region.}

\item{output_folder_path_}{Path to folder for storing outputs.}

\item{save_fig_}{Boolean (TRUE or FALSE). Whether to save output figure.}

\item{save_csv_}{Boolean (TRUE or FALSE). Whether to save output CSVs.}

\item{meta_analysis}{Boolean (TRUE or FALSE). Whether to include
meta-analysis. Must be TRUE if by_region argument is FALSE.}

\item{by_region}{Boolean (TRUE or FALSE). Whether to disaggregate by region.
Must be TRUE if meta-analysis is FALSE.}

\item{time_range_start_}{Start of time range over which to run the analysis.  'None' if over full range.}

\item{time_range_end_}{End of time range over which to run the analysis.  'None' if over full range.}

\item{dependent_col_}{the column name of the
dependent variable of interest e.g. deaths}

\item{time_col_}{The column name of column containing dates (e.g date, year).}

\item{region_col_}{The column name of the column containing regions.}

\item{temp_col_}{the column name of the column containing the exposure.}

\item{varfun_}{Exposure function
(see dlnm::crossbasis)}

\item{vardegree_}{Degrees of freedom in exposure function
(see dlnm:crossbasis)}

\item{lag_}{Lag length in time
(see dlnm::logknots)}

\item{lagnk_}{Number of knots in lag function
(see dlnm::logknots)}

\item{dfseas_}{Degrees of freedom for seasonality}

\item{indepedent_col1_}{column name of first extra independent
variable to include in regression (excluding temperature,
see config file for formula structure). 'None' if none.}

\item{indepedent_col2_}{column name of second independent
variable to include in regression (excluding temperature,
see config file for formula structure). 'None' if none.}

\item{indepedent_col3_}{column name of third independent
variable to include in regression (excluding temperature,
see config file for formula structure). 'None' if none.}
}
\value{
\itemize{

\item A PDF containing a line plot of temperature versus
relative risk per region,
and histogram of temperatures per region.
\item A CSV of relative risk per temperature per region.
\item \code{output_df} A dataframe with relative risk estimates and confidence
intervals across the temperature range for each region.
\item \code{tmean_df} A dataframe with daily mean exposure values for each
region.
\item \code{anregions_bind} A matrix of numbers of deaths attributable to
temperature, heat, cold, extreme heat and extreme cold (with confidence
intervals), disaggregated by region.
\item \code{attrdl_yr_all} A dataframe with attributable deaths by year for each
region.
\item \code{attr_fractions_yr} A dataframe with attributable fractions by year
and region.
}
}
\description{
Runs a sequence of functions to carry out
heat-related mortality analysis.
}
\details{
Modified from Gasparrini A et al. (2015)
The Lancet. 2015;386(9991):369-375.
}
\seealso{
\link{dlnm} package
}
